<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤ë§ˆíŠ¸ ìœˆë„ìš°</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Do+Hyeon&family=Jua&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="./css.css">
    <script src="firebase.js"></script>
</head>

<body>
    <div class="allbox">
        <header>
            <div class="line2" style="font-family: 'Jua', sans-serif; font-size: 20px;">ì‹¤ë‚´ì˜ ì¾Œì í•œ ê³µê¸°ë¥¼ ì±…ì„ì§€ëŠ”</a></div>
            <a href="https://github.com/chooseongwoo/9team" target="_blank"
                style="text-decoration: none; color: inherit;">
                <div class="line">ğŸªŸSMART <span style="color: #4949E8;">WINDOW</span></div>
            </a>
        </header>
        <aside>
            <div class="line3" style="font-family: 'Jua', sans-serif; font-size: 20px;">ì£¼ëª©í•  ê¸°ìƒì´ìŠˆâ˜ï¸</div>
            <div class="box" style="text-align: center; line-height: 250%;">ì˜¤í›„ 6ì‹œì— ë¹„ê°€ ë‚´ë¦´ ì˜ˆì •ì´ì—ìš”!</div>
            <br><br>
            <div class="box2" style="text-align: left; line-height: 150%;">
                <div style="left: 20px; text-align: left; position: relative;;">
                    <br>
                    <a style="font-family: 'Do HYeon', sans-serif; font-size: 35px;">ì§€ê¸ˆ ì‹¤ë‚´ëŠ”...</a>
                    <br>
                    <div id="temp"></div>
                    <div id="humi"></div>
                    <div id="dust"></div>
                </div>
            </div>
            <br>
            <div class="box2"></div>
        </aside>
    </div>
    <div class="allbox" style="float: left; top:33%; left: 12%;">
        <span id="mp" style="font-family: 'Jua', sans-serif; font-size: 25px;"></span>
        <span id="hour" style="font-family: 'Jua', sans-serif; font-size: 25px;"></span>
        <div class="box3">
            <div id="tip" class="line"></div>
        </div>
        <br>
        <div style="font-family: 'Jua', sans-serif; font-size: 23px;">&nbsp;&nbsp;ì§ì ‘ ì„ íƒí•´ì£¼ì„¸ìš”ğŸ‘‡</div>
        &nbsp;&nbsp;<input type="button" id="open" class="button" value="OPEN">
        &nbsp;&nbsp;<input type="button" id="close" class="button" value="CLOSE">
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-firestore.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAlUkKCjlnXXI15SUrLCWEaMPnHPkgg6sA",
            authDomain: "smart-window-72fb6.firebaseapp.com",
            databaseURL: "https://smart-window-72fb6-default-rtdb.firebaseio.com",
            projectId: "smart-window-72fb6",
            storageBucket: "smart-window-72fb6.appspot.com",
            messagingSenderId: "356997279942",
            appId: "1:356997279942:web:dc317ecfc74ce052e7a7c7",
            measurementId: "G-7GV8726MBS"
        };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        database.ref("sensor").on("value", snapshot => {
            const object = snapshot.val();
            document.querySelector("#temp").innerHTML =
                "ì˜¨ë„ : " + object.temp + "Â°C";
        });
        database.ref("sensor").on("value", snapshot => {
            const object = snapshot.val();
            document.querySelector("#humi").innerHTML =
                "ìŠµë„ : " + object.humi + "%";
        });
        database.ref("sensor").on("value", snapshot => {
            const object = snapshot.val();
            document.querySelector("#dust").innerHTML =
                "ë¯¸ì„¸ë¨¼ì§€ : " + object.dust + "ã/mÂ³";
        });
        document.getElementById("open").onclick = function () {
            database.ref("set").on("value", snapshot => {
            const object = snapshot.val();
            const auto = object.auto;
            if (auto == 0) {
                document.getElementById("open").onclick = function () {
                    database.ref("set").update({ 'window': 1 });
                }
                document.getElementById("close").onclick = function () {
                    database.ref("set").update({ 'window': 0 });
                }
            }
            else alert("ìë™ëª¨ë“œì…ë‹ˆë‹¤.");
        });
        }
        document.getElementById("close").onclick = function () {
            database.ref("set").on("value", snapshot => {
            const object = snapshot.val();
            const auto = object.auto;
            if (auto == 0) {
                document.getElementById("open").onclick = function () {
                    database.ref("set").update({ 'window': 1 });
                }
                document.getElementById("close").onclick = function () {
                    database.ref("set").update({ 'window': 0 });
                }
            }
            else alert("ìë™ëª¨ë“œì…ë‹ˆë‹¤.");
        });
        }

    </script>
    <script>
        fun();
        function fun() {
            let today = new Date();
            let hours = today.getHours();
            let min = today.getMinutes();
            let sec = today.getSeconds();
            let hours2 = hours - 12;
            if (hours >= 13) {
                mp.innerHTML = "ì§€ê¸ˆ ì‹œê°„ ì˜¤í›„ ";
                hour.innerHTML = (hours2) + "ì‹œ " + (min) + "ë¶„ " + (sec) + "ì´ˆ";
            }
            else {
                mp.innerHTML = "ì§€ê¸ˆ ì‹œê°„ ì˜¤ì „ ";
                hour.innerHTML = (hours) + "ì‹œ " + (min) + "ë¶„ " + (sec) + "ì´ˆ";
            }
            setTimeout(fun, 1000);
        }
    </script>
    <script>
        f();
        function f() {
            const a = Math.floor(Math.random() * 9);
            switch (a) {
                case 1:
                    tip.innerHTML = "í™˜ì ˆê¸°ì—ëŠ” ê°€ë²¼ìš´ ê±·ì˜·ì„ ì±™ê²¨ì£¼ì„¸ìš”";
                    break;
                case 2:
                    tip.innerHTML = "í–‡ë¹›ì´ ê°•í•œ ë‚ ì—ëŠ” ì„ í¬ë¦¼ì„ ë°œë¼ì£¼ì„¸ìš”";
                    break;
                case 3:
                    tip.innerHTML = "ì ì • ë¬¼ ì„­ì·¨ëŸ‰ì€ 8ì»µì´ë¼ê³  í•´ìš”";
                    break;
                case 4:
                    tip.innerHTML = "ë¯¸ì„¸ë¨¼ì§€ê°€ ì‹¬í•œ ë‚ ì—ëŠ” ë§ˆìŠ¤í¬ë¥¼ ê¼­ ì¨ì£¼ì„¸ìš”";
                    break;
                case 5:
                    tip.innerHTML = "ë°–ì´ ë°ë‹¤ë©´ ì „ë“±ì€ ë„ëŠ” ê²Œ ì–´ë–¨ê¹Œìš”?";
                    break;
                case 6:
                    tip.innerHTML = "ë„ˆë¬´ ì¶”ìš¸ ë•Œ ì´ˆì½œë¦¿ì„ ë¨¹ìœ¼ë©´ ëª¸ì´ ë”°ëœ»í•´ì ¸ìš”";
                    break;
                case 7:
                    tip.innerHTML = "ì—¬ë¦„ì²  ì ì • ì‹¤ë‚´ ì˜¨ë„ëŠ” 24~26â„ƒ";
                    break;
                case 8:
                    tip.innerHTML = "ê²¨ìš¸ì²  ì ì • ì‹¤ë‚´ ì˜¨ë„ëŠ” 18~20â„ƒ";
                    break;
                default:
                    tip.innerHTML = "ë„ˆë¬´ ê±´ì¡°í•œ ê±°ë³´ë‹¤ëŠ” ì ì • ìŠµë„ë¥¼ ìœ ì§€í•˜ì„¸ìš”";
            }
            setTimeout(f, 10000);
        }
    </script>
</body>

</html>