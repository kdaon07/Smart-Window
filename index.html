<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤ë§ˆíŠ¸ ìœˆë„ìš°</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Do+Hyeon&family=Jua&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="./css.css">
    <script src="firebase.js"></script>
</head>

<body>
    <div class="allbox">
        <header>
            <div class="line2" style="font-family: 'Jua', sans-serif; font-size: 20px;">ì‹¤ë‚´ì˜ ì¾Œì í•œ ê³µê¸°ë¥¼ ì±…ì„ì§€ëŠ”</a></div>
            <a href="https://github.com/chooseongwoo/9team" target="_blank"
                style="text-decoration: none; color: inherit;">
                <div class="line">ğŸªŸSMART <span style="color: #4949E8;">WINDOW</span></div>
            </a>
        </header>
        <aside>
            <div class="line3" style="font-family: 'Jua', sans-serif; font-size: 20px;">ì£¼ëª©í•  ê¸°ìƒì´ìŠˆâ˜ï¸</div>
            <div id="tip2" class="box" style="text-align: center; line-height: 250%;"></div>
            <br><br>
            <div class="box2" style="text-align: left; line-height: 150%;">
                <div style="left: 20px; text-align: left; position: relative;;">
                    <br>
                    <a style="font-family: 'Do HYeon', sans-serif; font-size: 35px;">ì§€ê¸ˆ ìƒí™©ì€...</a>
                    <br>
                    <div id="temp"></div>
                    <div id="humi"></div>
                    <div id="dust"></div>
                </div>
            </div>
            <br>
            <div class="box2">
                <div style="top:-15px; left: 20px; text-align: left; position: relative;;">
                    <br>
                    <a style="font-family: 'Do HYeon', sans-serif; font-size: 35px;">ì‚¬ìš©ì ì„¤ì •</a>
                    <br>
                    <div id="utemp"></div>
                    <div id="uhumi"></div>
                    <div id="uauto"></div>
                    <div id="uwin"></div>
                </div>
            </div>
        </aside>
    </div>
    <div class="allbox" style="float: left; top:25%; left: 20%;">
        <span id="mp" style="font-family: 'Jua', sans-serif; font-size: 25px;"></span>
        <span id="hour" style="font-family: 'Jua', sans-serif; font-size: 25px;"></span>
        <div class="box3">
            <div id="tip" class="line4"></div>
        </div>
        <br>
        <div style="font-family: 'Jua', sans-serif; font-size: 23px;left: 10%;">&nbsp;&nbsp;ì§ì ‘ ì„ íƒí•´ì£¼ì„¸ìš”ğŸ‘‡</div>
        &nbsp;&nbsp;<input type="button" id="open" class="button" value="OPEN">
        &nbsp;&nbsp;<input type="button" id="close" class="button" value="CLOSE">
        <br><br>
        <div style="font-family: 'Jua', sans-serif; font-size: 23px;">&nbsp;&nbsp;ìŠ¤ë§ˆíŠ¸ ìœˆë„ìš°ì—ê²Œ&nbsp;&nbsp;ë‚˜ë§Œì˜
            ê¸°í›„ë¥¼<br>&nbsp;&nbsp;ë§¡ê²¨ì£¼ì„¸ìš”ğŸ˜š&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ì„¤ì •í•´ë´ìš”ğŸ¥°</div>
        &nbsp;&nbsp;<input type="button" id="auto" class="button2" value="AUTO">
        &nbsp;&nbsp;<input type="button" id="setting" class="button2" value="SETTING">
    </div>
    <div id="sett2" style="position:absolute; width:100%; height:100%; z-index:1;display:none;"></div>
    <div id="sett" style="position:absolute; left:25%; width:50%; height:80%; z-index:1;display:inline;">
        <div class="settbox">
            <div>ì›í•˜ëŠ” <span style="color: #4949E8;">ì˜¨ë„</span>ë¥¼ ì„¤ì •í•´ ì£¼ì„¸ìš”</div>
            <input type="number" id="settemp"><span class="boxtxt">Â°C</span>
        </div>
        <div class="settbox2">
            <div>ì›í•˜ëŠ” <span style="color: #4949E8;">ìŠµë„</span>ë¥¼ ì„¤ì •í•´ ì£¼ì„¸ìš”</div>
            <input type="number" id="sethumi"><span class="boxtxt">%</span>
        </div>
        <div class="btbox">
            <button type="button" id="setbt">ì™„ë£Œ</button>
            <button type="button" id="rsetbt">ì·¨ì†Œ</button>
        </div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-firestore.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAlUkKCjlnXXI15SUrLCWEaMPnHPkgg6sA",
            authDomain: "smart-window-72fb6.firebaseapp.com",
            databaseURL: "https://smart-window-72fb6-default-rtdb.firebaseio.com",
            projectId: "smart-window-72fb6",
            storageBucket: "smart-window-72fb6.appspot.com",
            messagingSenderId: "356997279942",
            appId: "1:356997279942:web:dc317ecfc74ce052e7a7c7",
            measurementId: "G-7GV8726MBS"
        };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        database.ref("sensor").on("value", snapshot => {
            const object = snapshot.val();
            document.querySelector("#temp").innerHTML =
                "ì˜¨ë„ : " + object.temp + "Â°C";
        });
        database.ref("sensor").on("value", snapshot => {
            const object = snapshot.val();
            document.querySelector("#humi").innerHTML =
                "ìŠµë„ : " + object.humi + "%";
        });
        database.ref("sensor").on("value", snapshot => {
            const object = snapshot.val();
            document.querySelector("#dust").innerHTML =
                "ë¯¸ì„¸ë¨¼ì§€ : " + object.dust + "ã/mÂ³";
        });
        database.ref("userset").on("value", snapshot => {
            const object = snapshot.val();
            document.querySelector("#utemp").innerHTML =
                "ì˜¨ë„ : " + object.utemp + "Â°C";
        });
        database.ref("userset").on("value", snapshot => {
            const object = snapshot.val();
            document.querySelector("#uhumi").innerHTML =
                "ìŠµë„ : " + object.uhumi + "%";
        });
        database.ref("set").on("value", snapshot => {
            const object = snapshot.val();
            const auto = object.auto;
            if (auto == 1) {
                document.querySelector("#uauto").innerHTML = "ì„¤ì • : ìë™";
            }
            if (auto == 0) {
                document.querySelector("#uauto").innerHTML = "ì„¤ì • : ìˆ˜ë™";
            }
        });
        database.ref("set").on("value", snapshot => {
            const object = snapshot.val();
            const window = object.window;
            if (window == 1) {
                document.querySelector("#uwin").innerHTML = "ì°½ë¬¸ : ì—´ë¦¼";
            }
            if (window == 0) {
                document.querySelector("#uwin").innerHTML = "ì°½ë¬¸ : ë‹«í˜";
            }
        });
        database.ref("set").on("value", snapshot => {
            const object = snapshot.val();
            const auto = object.auto;
            document.getElementById('auto').onclick = function () {
                if (auto == 1) {
                    database.ref("set").update({ 'auto': 0 });
                }
                else {
                    database.ref("set").update({ 'auto': 1 });
                };
            };
        });
        database.ref("set").on("value", snapshot => {
            const object = snapshot.val();
            const auto = object.auto;
            document.getElementById("open").onclick = function () {
                if (auto == 0) {
                    database.ref("set").update({ 'window': 1 });
                }
                else alert("ìë™ëª¨ë“œì…ë‹ˆë‹¤.");
                };
            document.getElementById("close").onclick = function () {
                if (auto == 0) {
                    database.ref("set").update({ 'window': 0 });
                }
                else alert("ìë™ëª¨ë“œì…ë‹ˆë‹¤.");
                };
        });
        database.ref("userset").on("value", snapshot => {
            const object = snapshot.val();
            const utemp = object.utemp;
            const uhumi = object.uhumi;
            document.getElementById("setting").onclick = function () {
                document.getElementById("sett2").style.display = 'inline'
                document.getElementById("sett").style.top = '6%'
                document.getElementById("settemp").value = (utemp)
                document.getElementById("sethumi").value = (uhumi)
            }
        });
        document.getElementById('setbt').onclick = function () {
            document.getElementById("sett2").style.display = 'none'
            document.getElementById("sett").style.top = '100%'
            const sett = document.getElementById('settemp').value;
            const seth = document.getElementById('sethumi').value;
            database.ref("userset").update({ 'utemp': (sett) });
            database.ref("userset").update({ 'uhumi': (seth) });
        }
        document.getElementById('rsetbt').onclick = function () {
            document.getElementById("sett2").style.display = 'none'
            document.getElementById("sett").style.top = '100%'
        }

    </script>
    <script>
        fun();
        function fun() {
            let today = new Date();
            let hours = today.getHours();
            let min = today.getMinutes();
            let sec = today.getSeconds();
            let hours2 = hours - 12;
            if (hours >= 13) {
                mp.innerHTML = "ì§€ê¸ˆ ì‹œê°„ ì˜¤í›„ ";
                hour.innerHTML = (hours2) + "ì‹œ " + (min) + "ë¶„ " + (sec) + "ì´ˆ";
            }
            else {
                mp.innerHTML = "ì§€ê¸ˆ ì‹œê°„ ì˜¤ì „ ";
                hour.innerHTML = (hours) + "ì‹œ " + (min) + "ë¶„ " + (sec) + "ì´ˆ";
            }
            setTimeout(fun, 1000);
        }
    </script>
    <script>
        f();
        function f() {
            const a = Math.floor(Math.random() * 9);
            switch (a) {
                case 1:
                    tip.innerHTML = "í™˜ì ˆê¸°ì—ëŠ” ê°€ë²¼ìš´ ê±·ì˜·ì„ ì±™ê²¨ì£¼ì„¸ìš”";
                    break;
                case 2:
                    tip.innerHTML = "í–‡ë¹›ì´ ê°•í•œ ë‚ ì—ëŠ” ì„ í¬ë¦¼ì„ ë°œë¼ì£¼ì„¸ìš”";
                    break;
                case 3:
                    tip.innerHTML = "ì ì • ë¬¼ ì„­ì·¨ëŸ‰ì€ 8ì»µì´ë¼ê³  í•´ìš”";
                    break;
                case 4:
                    tip.innerHTML = "ë¯¸ì„¸ë¨¼ì§€ê°€ ì‹¬í•œ ë‚ ì—ëŠ” ë§ˆìŠ¤í¬ë¥¼ ê¼­ ì¨ì£¼ì„¸ìš”";
                    break;
                case 5:
                    tip.innerHTML = "ë°–ì´ ë°ë‹¤ë©´ ì „ë“±ì€ ë„ëŠ” ê²Œ ì–´ë–¨ê¹Œìš”?";
                    break;
                case 6:
                    tip.innerHTML = "ë„ˆë¬´ ì¶”ìš¸ ë•Œ ì´ˆì½œë¦¿ì„ ë¨¹ìœ¼ë©´ ëª¸ì´ ë”°ëœ»í•´ì ¸ìš”";
                    break;
                case 7:
                    tip.innerHTML = "ì—¬ë¦„ì²  ì ì • ì‹¤ë‚´ ì˜¨ë„ëŠ” 24~26â„ƒ";
                    break;
                case 8:
                    tip.innerHTML = "ê²¨ìš¸ì²  ì ì • ì‹¤ë‚´ ì˜¨ë„ëŠ” 18~20â„ƒ";
                    break;
                default:
                    tip.innerHTML = "ë„ˆë¬´ ê±´ì¡°í•œ ê±°ë³´ë‹¤ëŠ” ì ì • ìŠµë„ë¥¼ ìœ ì§€í•˜ì„¸ìš”";
            }
            setTimeout(f, 10000);
        }
    </script>
    <script>
        rt();
        function rt() {
            const i = Math.floor(Math.random() * 12) + 1;
            switch (i) {
                case 1:
                    tip2.innerHTML = "1ì›” ëˆˆì´ ìì£¼ë‚´ë¦¬ê³  ê±´ì¡°í•´ìš”";
                    break;
                case 2:
                    tip2.innerHTML = "2ì›” ì—¬ì „íˆ ì¶¥ì§€ë§Œ ëˆˆì´ ì¤„ì–´ë“¤ê³  ë”°ëœ»í•´ì ¸ìš”";
                    break;
                case 3:
                    tip2.innerHTML = "3ì›” ë´„ì˜ ì‹œì‘! ìŒ€ìŒ€í•˜ê³  ë³€ë•ìŠ¤ëŸ¬ì›Œìš”";
                    break;
                case 4:
                    tip2.innerHTML = "4ì›” ë”°ëœ»í•œ ë´„ë‚ , í™˜ì ˆê¸° ê°ê¸° ì¡°ì‹¬í•´ìš”";
                    break;
                case 5:
                    tip2.innerHTML = "5ì›” ì¼êµì°¨ê°€ ì»¤ì§€ê³  ê°€ë” ì†Œë‚˜ê¸°ê°€ ë‚´ë ¤ìš”";
                    break;
                case 6:
                    tip2.innerHTML = "6ì›” ì´ˆì—¬ë¦„ ì‹œì‘, ë”ì›Œì§€ê³  ìŠµë„ ë†’ì•„ì ¸ìš”";
                    break;
                case 7:
                    tip2.innerHTML = "7ì›” ë³¸ê²©ì ì¸ ì¥ë§ˆ! ìš°ì‚°ì„ ê°€ì§€ê³  ë‹¤ë…€ìš”";
                    break;
                case 8:
                    tip2.innerHTML = "8ì›” ë¹„ê°€ ë§ì´ ì˜¤ê³ , ê°•í’ì´ ë¶ˆ ìˆ˜ë„ ìˆì–´ìš”";
                    break;
                case 8:
                    tip2.innerHTML = "9ì›” ì‹œì›í•œ ê°€ì„ì˜ ì‹œì‘! ê±´ì¡°í•˜ê³  ì‹œì›í•´ì ¸ìš”";
                    break;
                case 8:
                    tip2.innerHTML = "10ì›” ê°€ì„ì˜ ì •ì , ì‹œì›í•˜ê³  ì¡°ê¸ˆ ìŒ€ìŒ€í•´ìš”";
                    break;
                case 8:
                    tip2.innerHTML = "11ì›” ì´ˆê²¨ìš¸, ì¶”ì›Œì§€ê³  ê°„ê°„íˆ ë¹„ê°€ ë‚´ë ¤ìš”";
                    break;
                default:
                    tip2.innerHTML = "12ì›” ì¶”ìš´ ê²¨ìš¸, ëˆˆì´ ìì£¼ ë‚´ë¦¬ê³  ê±´ì¡°í•´ìš”";
            }
            setTimeout(rt, 6000);
        }
    </script>
</body>

</html>